---
title: "IDDAP: Infectious Diseases Data Analysis Program"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    runtime: shiny
    social: menu
    theme: yeti
#hello this is my comment by Mike
---
```{r global, include=FALSE}
library(flexdashboard)
library(ggplot2)
library(mgcv)
library(shiny)
library(dplyr)
library(readr)
```


Inputs {.sidebar data-width=350}
-----------------------------------------------------------------------

```{r}
fileInput('file1', h5('Choose a file to upload'),
            accept = c('text/csv','text/comma-separated-values',
                       'text/tab-separated-values','text/plain','.csv','.tsv'))
sliderInput('age', "Age Range", min = 0, max = 110, value=c(30, 70) )
sliderInput('weight', "Weight Range (kgs) ", min = 0, max = 150, value=c(30, 70) )
sliderInput('height', "Height Range (m) ", min = 0, max = 2.5, value=c(1, 2) )
dateRangeInput('OPATad', "Admittance to the OPAT Program", start= "2008-01-01", 
               end= "2012-01-01", min = "2005-01-01", max = "2020-01-01",startview="year")
checkboxGroupInput("resis", "Resistant Infection? (deselection will filter out the option)", choices= c("Yes"=1, "No"=2), selected = c(1,2))
checkboxGroupInput("riskofre", "High Risk of Readmission? (deselection will filter out the option)", choices= c("Yes"=1, "No"=2), selected = c(1,2))
checkboxGroupInput("MF", "Gender: (deselection will filter out the option)", choices= c("Male", "Female"), selected = c("Male", "Female"))
checkboxGroupInput("AB", "Antibiotic Type: (deselection will filter out the option)", choices= c("Erythromycin", "Lymecycline", "Norfloxacin", "Ciprofloxacin", "Amoxicillin", 	"Gentamicin","Phenoxymethylpenicillin", "Other"), selected = c("Erythromycin", "Lymecycline", "Norfloxacin", "Ciprofloxacin", "Amoxicillin", 	"Gentamicin","Phenoxymethylpenicillin", "Other"))

```

Column {data-width=250}
-----------------------------------------------------------------------
### Sorting Criteria {data-height=100}
```{r}

```
### Patient Data Output {data-height=500}

```{r}
library(knitr)

renderTable({
  # if(is.null(input$file1))
  #   return()
  newdata<-read_csv('mdata.csv')
  # ^(input$file1$datapath) for when you want it to be the file uploaded
  assign('inputfile',newdata)
  #do things to modify the "input file" below here"
  
  # Age input conditionals
  
  # Weight input conditionals
  
  # Height input conditionals
  if("1" %in% input$riskofre==FALSE )
    inputfile<- filter(inputfile,`High Risk of Readmission`=='N')
  if("2" %in% input$riskofre==FALSE )
    inputfile<- filter(inputfile,`High Risk of Readmission`=='Y')
  if(is.null(input$riskofre))
    inputfile <- "please mark whether the patient is at risk for readmission"
  # needed at the very end to return the modified inputful
  inputfile
  
  # Resistant Checkbox Group conditionals
  if("1" %in% input$resis==FALSE )
    inputfile<- filter(inputfile,`Resistant Organism (Y/N)`=='N')
  if("2" %in% input$resis==FALSE )
    inputfile<- filter(inputfile,`Resistant Organism (Y/N)`=='Y')
  if(is.null(input$resis))
    inputfile <- "please select a resistance"
  # needed at the very end to return the modified inputful
  inputfile
})
```

### Data Analytics  {data-height=200}

```{r}

```

